# Query: Group Terms by Category
# Purpose: Count and list terms in each category
# Business Value: Understand terminology distribution

PREFIX ex: <https://w3id.org/cmc-stagegate#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX skos: <http://www.w3.org/2004/02/skos/core#>

SELECT ?category (COUNT(?term) as ?termCount) (GROUP_CONCAT(?abbr; SEPARATOR=", ") as ?examples)
WHERE {
    ?term a ex:DefinedTerm ;
          ex:hasAbbreviation ?abbr ;
          ex:hasTermCategory ?categoryResource .
    
    ?categoryResource rdfs:label ?category .
}
GROUP BY ?category
ORDER BY DESC(?termCount)
