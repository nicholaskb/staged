# Query: count_deliverables

# Count total deliverables for CGT Stage Gate 0
PREFIX sg: <http://example.org/stagegate#>
SELECT (COUNT(?deliverable) as ?count)
WHERE {
    ?deliverable a sg:Deliverable ;
                 sg:stageGate sg:CGT-Gate-0 .
}

----------------------------------------

# Query: deliverables_by_area

# List deliverables grouped by functional area
PREFIX sg: <http://example.org/stagegate#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
SELECT ?area ?areaLabel ?deliverable ?delivLabel
WHERE {
    ?area a sg:FunctionalArea ;
          rdfs:label ?areaLabel .
    ?deliverable a sg:Deliverable ;
                 sg:functionalArea ?area ;
                 rdfs:label ?delivLabel .
}
ORDER BY ?areaLabel ?delivLabel

----------------------------------------

# Query: find_unassigned

# Find deliverables without owners
PREFIX sg: <http://example.org/stagegate#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
SELECT ?deliverable ?label
WHERE {
    ?deliverable a sg:Deliverable ;
                 rdfs:label ?label .
    FILTER NOT EXISTS { ?deliverable sg:owner ?owner }
}

----------------------------------------

# Query: gate_summary

# Get stage gate summary information
PREFIX sg: <http://example.org/stagegate#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
SELECT ?gate ?label ?stream ?number ?description (COUNT(?deliverable) as ?deliverableCount)
WHERE {
    ?gate a sg:StageGate ;
          rdfs:label ?label ;
          sg:valueStream ?stream ;
          sg:gateNumber ?number ;
          sg:description ?description .
    OPTIONAL {
        ?deliverable sg:stageGate ?gate .
    }
}
GROUP BY ?gate ?label ?stream ?number ?description

----------------------------------------

